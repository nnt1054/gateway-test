{"version":3,"sources":["../../mini5-engine/build/index.js","../../mini5-engine/build/engine.js","../../mini5-engine/build/scene.js","../../mini5-engine/build/gameObject.js","ui/logo.svg","store/reducers/counterSlice.js","store/reducers/playerStateSlice.js","ui/App.js","store/store.js","game/gameObjects/backgroundObject.js","game/gameObjects/blockObject.js","game/gameObjects/playerObject.js","game/gameObjects/otherPlayerObject.js","game/gameObjects/portalObject.js","game/gameObjects/bouncingBallObject.js","game/gameObjects/playerManager.js","game/gameObjects/inputManager.js","game/scenes/baseScene.js","game/scenes/index.js","game/scenes/testScene.js","game/scenes/area01Scene.js","game/scenes/area02Scene.js","game/main.js","index.js"],"names":["Object","defineProperty","exports","value","enumerable","get","_engine","_scene","_gameObject","_interopRequireDefault","require","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","configurable","writable","key","_defineProperty","MainLoop","engine","sceneList","initScene","mode","arguments","undefined","this","MODE_CLIENT","config","currentScene","sceneConfig","nextScene","locals","window","createCanvas","update","bind","draw","begin","end","protoProps","staticProps","canvas","document","getElementById","context","getContext","fpsCounter","fpsValue","width","height","mouseEvents","addEventListener","event","x","offsetLeft","y","offsetTop","mousePos","preventDefault","keyState","keyPress","keyCode","scene","args","delta","interpolationPercentage","clearRect","fps","panic","setUpdate","setDraw","setBegin","setEnd","start","MODE_SERVER","Error","prototype","_default","gameObjects","layerOrder","layers","intervals","gameState","setup","clearInterval","console","log","switchScene","curLayer","j","_createClass","gameObject","parent","_isClicked","AABB","aabb","_isClickTarget","clickTarget","pointInAABB","clickOffsetLeft","getMousePos","clickAABB","min","clickOffsetTop","point","max","lastPos","anchor","anchorPos","anchorees","foundCollisions","updateAnchorees","canvasPos","push","pos","setAnchorPos","aabbList","collisions","checkCollision","counterSlice","createSlice","name","initialState","reducers","increment","state","decrement","incrementByAmount","action","payload","actions","selectCount","counter","playerStateSlice","status","position","setPlayerState","setPlayerPosition","getPlayerState","playerState","getPlayerPosition","Counter","count","useSelector","dispatch","useDispatch","aria-label","onClick","PlayerStateUI","playerPosition","App","className","Component","configureStore","reducer","counterReducer","playerStateReducer","backgroundObject","fillStyle","fillRect","GameObject","blockObject","createAABB","color","playerObject","xVel","yVel","gravity","jump","jumpTimer","jumpDelay","colors","newCount","handleCountListener","handleCountUpdate","countUnsubscribe","store","subscribe","inputState","inputManager","sendUpdate","getState","yDisp","xDisp","xState","yState","Math","pow","setPos","checkCollisions","staticObjects","handleCollision","portalObjects","round","socket","emit","handleYCollision","handleXCollision","ifTopCollision","ifLeftCollision","textAlign","font","fillText","otherPlayerObject","username","connected","portalObject","bouncingBallObject","posAABB","radius","speed","velocity","direction","lastUpdate","circle","beginPath","arc","PI","fill","lineWidth","stroke","playerManagerObject","connectedPlayers","inputManagerObject","prev_xState","prev_yState","baseScene","scaled","on","data","innerWidth","innerHeight","Scene","background","ground","floating","ball","player","rightPortal","playerManager","leftPortal","process","Engine","game","SceneList","MODE_LOCAL","a","starting_scene","Game","forceSwitchScene","prompt","url","setup_websocket","updateSocket","ReactDOM","render","StrictMode","fetch","response","json","io","origin","path","pathname","query","sceneFadeOut","scene_name","tempUrl","newSocket","oldSocket","close","main"],"mappings":"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","file":"static/js/main.468981b3.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Engine\", {\n  enumerable: true,\n  get: function get() {\n    return _engine[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Scene\", {\n  enumerable: true,\n  get: function get() {\n    return _scene[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"GameObject\", {\n  enumerable: true,\n  get: function get() {\n    return _gameObject[\"default\"];\n  }\n});\n\nvar _engine = _interopRequireDefault(require(\"./engine.js\"));\n\nvar _scene = _interopRequireDefault(require(\"./scene.js\"));\n\nvar _gameObject = _interopRequireDefault(require(\"./gameObject\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MainLoop = require('mainloop.js');\n\nvar engine = /*#__PURE__*/function () {\n  function engine(sceneList, initScene) {\n    var mode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.MODE_CLIENT;\n    var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, engine);\n\n    this.sceneList = sceneList;\n    this.currentScene = new this.sceneList[initScene](this, config.sceneConfig);\n    this.nextScene = null;\n    this.locals = {};\n    this.mode = mode;\n\n    if (this.mode == engine.MODE_CLIENT) {\n      window.engine = this; //might want to change this later\n\n      this.createCanvas();\n    }\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n    this.begin = this.begin.bind(this);\n    this.end = this.end.bind(this);\n  }\n\n  _createClass(engine, [{\n    key: \"createCanvas\",\n    value: function createCanvas() {\n      // create Canvas and Initial Game Objects \n      this.canvas = document.getElementById('canvas'), this.context = this.canvas.getContext('2d'), this.fpsCounter = document.getElementById('fpscounter'), this.fpsValue = document.getElementById('fpsvalue'); // this.canvas.width = window.innerWidth;\n      // this.canvas.height = window.innerHeight;\n\n      this.canvas.width = 800;\n      this.canvas.height = 400; // MOUSE INPUT PROCESSOR\n\n      this.mouseEvents = {};\n      this.canvas.addEventListener('click', function (event) {\n        window.engine.mouseEvents['click'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false);\n      this.canvas.addEventListener('dblclick', function (event) {\n        window.engine.mouseEvents['dblclick'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false);\n      this.canvas.addEventListener('mousemove', function (event) {\n        window.engine.mouseEvents['mousemove'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n        window.engine.mousePos = window.engine.mouseEvents['mousemove'];\n      }, false);\n      this.canvas.addEventListener('mousedown', function (event) {\n        window.engine.mouseEvents['mousedown'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false);\n      this.canvas.addEventListener(\"contextmenu\", function (event) {\n        event.preventDefault();\n      }, false);\n      document.addEventListener('mouseup', function (event) {\n        window.engine.mouseEvents['mouseup'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false); // KEYBOARD INPUT PROCESSOR\n\n      this.keyState = {};\n      this.keyPress = {};\n      document.addEventListener(\"keydown\", function (event) {\n        if (!(event.keyCode in window.engine.keyState)) {\n          window.engine.keyState[event.keyCode] = 0;\n        }\n      });\n      document.addEventListener(\"keyup\", function (event) {\n        window.engine.keyPress[event.keyCode] = window.engine.keyState[event.keyCode];\n        delete window.engine.keyState[event.keyCode];\n      });\n      document.addEventListener(\"blur\", function (event) {\n        window.engine.keyState = {};\n        window.engine.keyPress = {};\n      });\n    }\n  }, {\n    key: \"switchScene\",\n    value: function switchScene(scene, args) {\n      this.nextScene = new this.sceneList[scene](this, args);\n    } // To Do: change this later\n\n  }, {\n    key: \"forceSwitchScene\",\n    value: function forceSwitchScene(scene, args) {\n      this.currentScene = new this.sceneList[scene](this, args);\n    }\n  }, {\n    key: \"update\",\n    value: function update(delta) {\n      // 1. Update Game Objects\n      if (this.currentScene) {\n        this.currentScene.update(delta);\n      } // 2. Reset mouseEvent and keyPress Dictionaries (if client)\n\n\n      this.mouseEvents = {};\n      this.keyPress = {};\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(interpolationPercentage) {\n      if (this.currentScene) {\n        this.context.clearRect(0, 0, canvas.width, canvas.height);\n        this.currentScene.draw(interpolationPercentage);\n      }\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {// check and process input\n    }\n  }, {\n    key: \"end\",\n    value: function end(fps, panic) {\n      // check for scene transition\n      if (this.nextScene) {\n        this.currentScene = this.nextScene;\n        this.nextScene = null;\n      } // calculate fps\n      // this.fpsCounter.textContent = Math.round(fps) + ' FPS';\n      // if (panic) {\n      //     var discardedTime = Math.round(MainLoop.resetFrameDelta());\n      //     console.warn('Main loop panicked, probably because the browser tab was put in the background. Discarding ' + discardedTime + 'ms');\n      // }\n\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.mode == engine.MODE_CLIENT) {\n        MainLoop.setUpdate(this.update).setDraw(this.draw).setBegin(this.begin).setEnd(this.end).start();\n      } else if (this.mode == engine.MODE_SERVER) {\n        MainLoop.setUpdate(this.update).setBegin(this.begin).setEnd(this.end).start();\n      } else {\n        throw new Error('mini5-engine supplied incorrect input for engine mode.');\n      }\n    }\n  }]);\n\n  return engine;\n}();\n\n_defineProperty(engine, \"MODE_CLIENT\", 'client');\n\n_defineProperty(engine, \"MODE_SERVER\", 'server');\n\nvar _default = engine;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar scene = /*#__PURE__*/function () {\n  function scene(engine) {\n    var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, scene);\n\n    this.engine = engine;\n    this.canvas = this.engine.canvas;\n    this.gameObjects = [];\n    this.layerOrder = [];\n    this.layers = {};\n    this.intervals = [];\n    this.gameState = {};\n    this.setup(args);\n  }\n\n  _createClass(scene, [{\n    key: \"setup\",\n    value: function setup(args) {// instantiate game objects here and connect their object references\n      // this method is meant to be overridden, it's literally the only thing that needs to change besides like name\n    }\n  }, {\n    key: \"switchScene\",\n    value: function switchScene(_scene, args) {\n      for (var i = 0; i < this.intervals.length; i++) {\n        clearInterval(this.intervals[i]);\n      }\n\n      console.log(this.intervals);\n      this.engine.switchScene(_scene, args);\n    }\n  }, {\n    key: \"update\",\n    value: function update(delta) {\n      for (var i = 0; i < this.gameObjects.length; i++) {\n        this.gameObjects[i].update(delta);\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(interpolationPercentage) {\n      var curLayer;\n\n      for (var i = 0; i < this.layerOrder.length; i++) {\n        curLayer = this.layers[this.layerOrder[i]];\n\n        for (var j = 0; j < curLayer.length; j++) {\n          curLayer[j].draw(interpolationPercentage);\n        }\n      }\n    }\n  }]);\n\n  return scene;\n}();\n\nvar _default = scene; // try {\n// \tmodule.exports = scene;\n// } catch (err) {\n// \tconsole.log('scene export failed');\n// }\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar gameObject = /*#__PURE__*/function () {\n  function gameObject(scene) {\n    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, gameObject);\n\n    this.scene = scene; // need this for object hiearchy\n\n    if (parent) {\n      this.parent = parent;\n    } else {\n      this.parent = scene;\n    }\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n    this._isClicked = false;\n  }\n\n  _createClass(gameObject, [{\n    key: \"update\",\n    value: function update(delta) {\n      console.log('update should be overridden');\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(interpolationPercentage) {\n      console.log('update should be overridden');\n    }\n  }, {\n    key: \"createAABB\",\n    value: function createAABB(width, height) {\n      var x = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var y = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var parent = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      return new AABB(width, height, x, y, parent);\n    }\n  }, {\n    key: \"allowClickDetection\",\n    value: function allowClickDetection(aabb) {\n      this._isClicked = false;\n      this._isClickTarget = this.scene.clickTarget === this;\n\n      if ('mousedown' in this.scene.engine.mouseEvents) {\n        if (this.pointInAABB(this.scene.engine.mouseEvents['mousedown'], aabb)) {\n          this.scene.clickTarget = this;\n          this.clickOffsetLeft = this.getMousePos().x - this.clickAABB.min.x;\n          this.clickOffsetTop = this.getMousePos().y - this.clickAABB.min.y;\n        }\n      }\n\n      if ('mouseup' in this.scene.engine.mouseEvents) {\n        if (this.scene.clickTarget === this) {\n          if (this.pointInAABB(this.scene.engine.mouseEvents['mouseup'], aabb)) {\n            this._isClicked = true;\n          }\n\n          this.scene.clickTarget = null;\n        }\n      }\n    }\n  }, {\n    key: \"isClicked\",\n    value: function isClicked() {\n      return this._isClicked;\n    }\n  }, {\n    key: \"isClickTarget\",\n    value: function isClickTarget() {\n      return this._isClickTarget;\n    }\n  }, {\n    key: \"getMousePos\",\n    value: function getMousePos() {\n      return this.scene.engine.mousePos;\n    }\n  }, {\n    key: \"pointInAABB\",\n    value: function pointInAABB(point, aabb) {\n      return point.x > aabb.min.x && point.x < aabb.max.x && point.y > aabb.min.y && point.y < aabb.max.y;\n    }\n  }]);\n\n  return gameObject;\n}();\n\nvar AABB = /*#__PURE__*/function () {\n  function AABB(width, height) {\n    var x = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var y = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var parent = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, AABB);\n\n    this.parent = parent;\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    this.lastPos = {\n      'x': x,\n      'y': y\n    };\n    this.anchor = null;\n    this.anchorPos = {\n      'x': 0,\n      'y': 0\n    };\n    this.anchorees = [];\n    this.foundCollisions = [];\n  }\n\n  _createClass(AABB, [{\n    key: \"min\",\n    get: function get() {\n      return {\n        'x': this.x,\n        'y': this.y\n      };\n    }\n  }, {\n    key: \"max\",\n    get: function get() {\n      return {\n        'x': this.x + this.width,\n        'y': this.y + this.height\n      };\n    }\n  }, {\n    key: \"canvasPos\",\n    get: function get() {\n      return {\n        'x': this.x + this.anchorPos.x,\n        'y': this.y + this.anchorPos.y\n      };\n    }\n  }, {\n    key: \"setPos\",\n    value: function setPos() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (x) {\n        this.lastPos.x = this.x;\n        this.x = x;\n      }\n\n      if (y) {\n        this.lastPos.y = this.y;\n        this.y = y;\n      }\n\n      this.updateAnchorees();\n    } // Called once at the beginning;\n\n  }, {\n    key: \"setAnchor\",\n    value: function setAnchor(aabb) {\n      this.anchor = aabb;\n      this.anchorPos = aabb.canvasPos;\n      aabb.anchorees.push(this);\n    }\n  }, {\n    key: \"setAnchorPos\",\n    value: function setAnchorPos(pos) {\n      this.anchorPos = pos;\n      this.updateAnchorees();\n    }\n  }, {\n    key: \"updateAnchorees\",\n    value: function updateAnchorees() {\n      // if anchor position changed, update positions of anchorees\n      for (var i = 0; i < this.anchorees.length; i++) {\n        this.anchorees[i].setAnchorPos(this.canvasPos);\n      }\n    }\n  }, {\n    key: \"checkCollision\",\n    value: function checkCollision(aabb) {\n      if (this.max.x <= aabb.min.x || this.min.x >= aabb.max.x) {\n        return false;\n      } else if (this.max.y <= aabb.min.y || this.min.y >= aabb.max.y) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"checkCollisions\",\n    value: function checkCollisions(aabbList) {\n      var collisions = [];\n\n      for (var i = 0; i < aabbList.length; i++) {\n        if (aabbList[i] == this) {\n          continue;\n        }\n\n        if (this.checkCollision(aabbList[i])) {\n          collisions.push(aabbList[i]);\n        }\n      }\n\n      return collisions;\n    } // Following Functions Assume Collision Exists with AABB\n\n  }, {\n    key: \"ifLeftCollision\",\n    value: function ifLeftCollision(aabb) {\n      return this.max.x > aabb.max.x;\n    }\n  }, {\n    key: \"ifLeftCollisionOnly\",\n    value: function ifLeftCollisionOnly(aabb) {\n      return this.max.x > aabb.max.x && this.min.x > aabb.min.x;\n    }\n  }, {\n    key: \"ifRightCollision\",\n    value: function ifRightCollision(aabb) {\n      return this.min.x < aabb.min.x;\n    }\n  }, {\n    key: \"ifRightCollisionOnly\",\n    value: function ifRightCollisionOnly(aabb) {\n      return this.min.x < aabb.min.x && this.max.x < aabb.max.x;\n    }\n  }, {\n    key: \"ifTopCollision\",\n    value: function ifTopCollision(aabb) {\n      return this.max.y > aabb.max.y;\n    }\n  }, {\n    key: \"ifTopCollisionOnly\",\n    value: function ifTopCollisionOnly(aabb) {\n      return this.max.y > aabb.max.y && this.min.y > aabb.min.y;\n    }\n  }, {\n    key: \"ifBottomCollision\",\n    value: function ifBottomCollision(aabb) {\n      return this.min.y < aabb.min.y;\n    }\n  }, {\n    key: \"ifBottomCollisionOnly\",\n    value: function ifBottomCollisionOnly(aabb) {\n      return this.max.y < aabb.max.y && this.min.y < aabb.min.y;\n    }\n  }]);\n\n  return AABB;\n}();\n\nvar _default = gameObject; // try {\n//   \tmodule.exports = gameObject;\n// } catch (err) {\n// \t  console.log('gameObject export failed');\n// }\n\nexports[\"default\"] = _default;","export default __webpack_public_path__ + \"static/media/logo.103b5fa1.svg\";","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nexport const counterSlice = createSlice({\r\n  name: 'counter',\r\n  initialState: {\r\n    value: 0\r\n  },\r\n  reducers: {\r\n    increment: state => {\r\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\r\n      // doesn't actually mutate the state because it uses the immer library,\r\n      // which detects changes to a \"draft state\" and produces a brand new\r\n      // immutable state based off those changes\r\n      state.value += 1\r\n    },\r\n    decrement: state => {\r\n      state.value -= 1\r\n    },\r\n    incrementByAmount: (state, action) => {\r\n      state.value += action.payload\r\n    }\r\n  }\r\n})\r\n\r\nexport const { increment, decrement, incrementByAmount } = counterSlice.actions\r\nexport const selectCount = state => state.counter.value;\r\n\r\nexport default counterSlice.reducer","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nexport const playerStateSlice = createSlice({\r\n  name: 'playerState',\r\n  initialState: {\r\n    status: 'idle',\r\n    position: [0, 0],\r\n    // x: 0,\r\n    // y: 0,\r\n  },\r\n  reducers: {\r\n    setPlayerState: (state, action) => {\r\n    \tstate.status = action.payload\r\n    },\r\n    setPlayerPosition: (state, action) => {\r\n    \tstate.position = action.payload\r\n    },\r\n  }\r\n})\r\n\r\nexport const { setPlayerState, setPlayerPosition } = playerStateSlice.actions;\r\nexport const getPlayerState = state => state.playerState.status;\r\nexport const getPlayerPosition = state => state.playerState.position;\r\n\r\nexport default playerStateSlice.reducer;","import React, { Component, useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  decrement,\n  increment,\n  selectCount,\n} from '../store/reducers/counterSlice';\nimport {\n  setPlayerState,\n  getPlayerState,\n  getPlayerPosition,\n} from '../store/reducers/playerStateSlice';\n\nfunction Counter() {\n  const count = useSelector(selectCount);\n  const dispatch = useDispatch();\n\n  return (\n    <div>\n      <h1> count: { count } </h1>\n      <button\n        aria-label=\"Increment value\"\n        onClick={() => dispatch(increment())}\n      > + </button>\n    </div>\n  )\n}\n\nfunction PlayerStateUI() {\n  const playerState = useSelector(getPlayerState);\n  const playerPosition = useSelector(getPlayerPosition);\n\n  return (\n    <div>\n      <h1> status: { playerState } </h1>\n      <h1> x: { playerPosition[0] } y: { playerPosition[1] } </h1>\n    </div>\n  )\n\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <h1> hello! </h1>\n        <Counter />\n        <PlayerStateUI />\n      </div>\n    );\n  }\n}\n\nexport default App;","import { configureStore } from '@reduxjs/toolkit';\nimport counterReducer from './reducers/counterSlice';\nimport playerStateReducer from './reducers/playerStateSlice';\n\nexport default configureStore({\n  reducer: {\n    counter: counterReducer,\n    playerState: playerStateReducer,\n  },\n});","import { GameObject } from 'mini5-engine';\r\n\r\nclass backgroundObject extends GameObject {\r\n\r\n    constructor(scene) {\r\n        super(scene)\r\n\t\t    this.parent.gameState['backgroundObject01'] = {}\r\n        this.gameState = this.parent.gameState['backgroundObject01'];\r\n        this.gameState = {x: 0, y: 1};\r\n    }\r\n\r\n  \tupdate(delta) {\r\n  \t}\r\n\r\n  \tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = 'lightgreen';\r\n        this.scene.engine.context.fillRect(0, 0, this.scene.canvas.width, this.scene.canvas.height);\r\n  \t}\r\n\r\n}\r\n\r\nexport default backgroundObject;","import { GameObject } from 'mini5-engine';\r\n\r\nclass blockObject extends GameObject {\r\n\r\n\tconstructor(scene, width, height, x, y) {\r\n\t    super(scene)\r\n      \tthis.scene = scene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n  \t\tthis.AABB = this.createAABB(width, height, x, y)\r\n  \t\tthis.color = 'blue';\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = this.color;\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n\t}\r\n\r\n}\r\n\r\nexport default blockObject;","import { GameObject } from 'mini5-engine';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { default as store } from '../../store/store'\r\nimport { \r\n\tsetPlayerState,\r\n\tsetPlayerPosition,\r\n} from '../../store/reducers/playerStateSlice'\r\nimport {\r\n\tselectCount,\r\n\tincrement,\r\n} from '../../store/reducers/counterSlice'\r\n\r\nconst MODE_LOCAL = 'local'\r\n\r\nclass playerObject extends GameObject {\r\n\r\n\tconstructor(scene, x, y) {\r\n\t    super(scene)\r\n      \tthis.scene = scene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n\r\n  \t\tthis.x = x;\r\n  \t\tthis.y = y;\r\n\r\n  \t\tthis.xVel = 10;\r\n  \t\tthis.yVel = 0;\r\n  \t\tthis.gravity = 0.005;\r\n  \t\tthis.jump = -1.5;\r\n  \t\tthis.jumpTimer = 0;\r\n  \t\tthis.jumpDelay = 1000;\r\n  \t\tthis.AABB = this.createAABB(64, 64, this.x, this.y)\r\n\r\n  \t\tthis.state = 'idle';\r\n  \t\tthis.colors = {\r\n  \t\t\t'jumping': 'red',\r\n  \t\t\t'walking': 'yellow',\r\n  \t\t\t'idle': 'blue',\r\n  \t\t}\r\n\r\n  \t\tthis.newCount = 0;\r\n  \t\tthis.count = 0;\r\n  \t\tconst handleCountListener = this.handleCountUpdate.bind(this);\r\n  \t\tthis.countUnsubscribe = store.subscribe(handleCountListener);\r\n\r\n  \t\tthis.inputState = this.scene.inputManager.inputState;\r\n  \t\tthis.sendUpdate = false;\r\n\t}\r\n\r\n\thandleCountUpdate() {\r\n\t\tthis.newCount = selectCount(store.getState());\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\t\tvar w = 87,\r\n\t\t\ta = 65,\r\n\t\t\ts = 83,\r\n\t\t\td = 68,\r\n\t\t\tspace = 32,\r\n\t\t\txDisp = 0,\r\n\t\t\tyDisp = 0;\r\n\r\n\t\tswitch (this.inputState.xState) {\r\n\t\t\tcase 'idle':\r\n\t\t\t\txDisp = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'movingLeft':\r\n\t\t\t\txDisp = -this.xVel;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'movingRight':\r\n\t\t\t\txDisp = this.xVel;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tswitch (this.inputState.yState) {\r\n\t\t\tcase 'jumping':\r\n\t\t\t\tif (this.jumpTimer <= 0) {\r\n\t\t\t\t\tthis.yVel = this.jump;\r\n\t\t\t\t\tthis.jumpTimer = this.jumpDelay;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.jumpTimer -= delta;\r\n\r\n\t\tif (this.yVel) {\r\n\t\t\tthis.state = 'jumping';\r\n\t\t} else if (xDisp) {\r\n\t\t\tthis.state = 'walking';\r\n\t\t} else {\r\n\t\t\tthis.state = 'idle';\r\n\t\t}\r\n\r\n\t\t// Resolve Physics Collisions\r\n\t\tthis.yVel += (this.gravity * delta);\r\n\t\tyDisp = (this.yVel * delta) + (this.gravity * Math.pow(delta, 2));\r\n\t\tthis.x += xDisp;\r\n\t\tthis.y += yDisp;\r\n\t\tthis.AABB.setPos(this.x, this.y);\r\n\t\tvar collisions = this.AABB.checkCollisions(this.scene.staticObjects);\r\n\t\tif (collisions.length > 0) {\r\n\t\t\tfor (var i = 0; i < collisions.length; i++) {\r\n\t\t\t\tvar aabb = collisions[i];\r\n\t\t\t\tthis.handleCollision(aabb, xDisp, yDisp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Resolve Portal Collisions\r\n\t\tvar collisions = this.AABB.checkCollisions(this.scene.portalObjects);\r\n\t\tvar nextScene = null;\r\n\t\tif (collisions.length > 0) {\r\n\t\t\tfor (var i = 0; i < collisions.length; i++) {\r\n\t            nextScene = collisions[i].parent.nextScene\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nextScene != null) {\r\n\t        // this.scene.switchScene(nextScene);\r\n\t        console.log(\"should switch to scene: \" + nextScene);\r\n\t        if (this.scene.engine.mode == MODE_LOCAL) {\r\n\t        \tthis.scene.switchScene(nextScene)\r\n\t        }\r\n\r\n\t\t}\r\n\r\n\t\tthis.count = this.newCount;\r\n\t\tstore.dispatch(setPlayerState(this.state));\r\n\t\tstore.dispatch(setPlayerPosition([ Math.round(this.x), Math.round(this.y)]));\r\n\t\tstore.dispatch(increment());\r\n\r\n\t\tif (this.sendUpdate && this.scene.engine === 'client') {\r\n\t\t\tthis.scene.engine.locals.socket.emit('inputState', this.inputState);\r\n\t\t\tthis.sendUpdate = false;\r\n\t\t}\r\n\r\n\t}\r\n\t// Resolves and sets AABB position based on colliding aabb, x-axis displacement, and y axis-displacement\r\n\thandleCollision(aabb, xDisp, yDisp) {\r\n\t\tif (xDisp > yDisp) {\r\n\t\t\tthis.AABB.setPos(this.x - xDisp, this.y)\r\n\t\t\tif (this.AABB.checkCollision(aabb)) {\r\n\t\t\t\tthis.handleYCollision(aabb);\r\n\t\t\t} else {\r\n\t\t\t\tthis.handleXCollision(aabb);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.AABB.setPos(this.x, this.y - yDisp)\r\n\t\t\tif (this.AABB.checkCollision(aabb)) {\r\n\t\t\t\tthis.handleXCollision(aabb);\r\n\t\t\t} else {\r\n\t\t\t\tthis.handleYCollision(aabb);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.AABB.setPos(this.x, this.y);\r\n\t}\r\n\r\n\t// helper function for handleCollision\r\n\thandleYCollision(aabb) {\r\n\t\tif (this.AABB.ifTopCollision(aabb)) {\r\n\t\t\tthis.y = aabb.max.y;\r\n\t\t} else {\r\n\t\t\tthis.y = aabb.min.y - this.AABB.height;\r\n\t\t\tthis.jumpTimer = 0;\r\n\t\t}\r\n\t\tthis.yVel = 0;\r\n\t}\r\n\t// helper function for handleCollision\r\n\thandleXCollision(aabb) {\r\n\t\tif (this.AABB.ifLeftCollision(aabb)) {\r\n\t\t\tthis.x = aabb.max.x;\r\n\t\t} else {\r\n\t\t\tthis.x = aabb.min.x - this.AABB.width;\r\n\t\t}\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = this.colors[this.state];\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n        this.scene.engine.context.fillStyle = \"black\";\r\n\t\tthis.scene.engine.context.textAlign = \"center\";\r\n        this.scene.engine.context.font = \"30px Comic Sans MS\";\r\n        this.scene.engine.context.fillText(\"THIS IS ME\", this.AABB.min.x + this.AABB.width/2, this.AABB.min.y - 10);\r\n\t}\r\n}\r\n\r\nexport default playerObject;","import { GameObject } from 'mini5-engine';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { default as store } from '../../store/store'\r\nimport { \r\n\tsetPlayerState,\r\n\tsetPlayerPosition,\r\n} from '../../store/reducers/playerStateSlice'\r\nimport {\r\n\tselectCount,\r\n\tincrement,\r\n} from '../../store/reducers/counterSlice'\r\n\r\nclass otherPlayerObject extends GameObject {\r\n\r\n\tconstructor(scene, username, parent) {\r\n\t    super(scene, parent)\r\n\t    this.username = username;\r\n      this.scene = scene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n\r\n  \t\tthis.x = 64;\r\n  \t\tthis.y = 0;\r\n\r\n  \t\tthis.xVel = 10;\r\n  \t\tthis.yVel = 0;\r\n  \t\tthis.gravity = 0.005;\r\n  \t\tthis.jump = -1.5;\r\n  \t\tthis.jumpTimer = 0;\r\n  \t\tthis.AABB = this.createAABB(64, 64, this.x, this.y)\r\n\r\n  \t\tthis.state = 'idle';\r\n  \t\tthis.colors = {\r\n  \t\t\t'jumping': 'red',\r\n  \t\t\t'walking': 'yellow',\r\n  \t\t\t'idle': 'blue',\r\n  \t\t}\r\n      this.gameState = this.parent.gameState[this.username];\r\n\r\n\r\n  \t\tconsole.log('connecting: ' + username);\r\n\t}\r\n\r\n\tupdate(delta) {\r\n        this.gameState = this.parent.gameState[this.username];\r\n        if (!this.gameState.connected) {\r\n        \treturn;\r\n        }\r\n\t\tthis.AABB.setPos(this.gameState.x, this.gameState.y);\r\n\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        if (!this.gameState.connected) {\r\n        \treturn;\r\n        }\r\n        this.scene.engine.context.fillStyle = this.colors[this.state];\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n        this.scene.engine.context.fillStyle = \"black\";\r\n\t\t    this.scene.engine.context.textAlign = \"center\";\r\n        this.scene.engine.context.font = \"30px Comic Sans MS\";\r\n        this.scene.engine.context.fillText(this.username, this.AABB.min.x + this.AABB.width/2, this.AABB.min.y - 10);\r\n\t}\r\n}\r\n\r\nexport default otherPlayerObject;","import { GameObject } from 'mini5-engine';\r\n\r\nclass portalObject extends GameObject {\r\n\r\n\tconstructor(scene, nextScene, width, height, x, y) {\r\n\t    super(scene)\r\n      this.scene = scene;\r\n      this.nextScene = nextScene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n  \t\tthis.AABB = this.createAABB(width, height, x, y, this)\r\n   \t\tthis.clickAABB = this.createAABB(width, height, x, y, this)\r\n  \t\tthis.color = 'yellow';\r\n\t}\r\n\r\n\tupdate(delta) {\r\n        // this.allowClickDetection(this.clickAABB);\r\n\r\n        // if (this.isClicked()) {\r\n        //     this.scene.switchScene(this.nextScene);\r\n        // }\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = this.color;\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n\t}\r\n\r\n}\r\n\r\nexport default portalObject;","import { GameObject } from 'mini5-engine';\r\n\r\nclass bouncingBallObject extends GameObject {\r\n  \r\n\r\n    constructor(scene, color='red') {\r\n        super(scene)\r\n\r\n  \t\tthis.posAABB = this.createAABB(128, 128, 128, 128)\r\n        this.radius = 32;\r\n        this.speed = 0.1;\r\n        this.velocity = 0.1;\r\n        this.direction = 1;\r\n        this.color = color;\r\n        this.target = null;\r\n\r\n        this.gameState = this.parent.gameState['bouncingBall'] = {x: this.posAABB.x, y: this.posAABB.y};\r\n        this.lastUpdate = this.gameState.y;\r\n    }\r\n\r\n  \tupdate(delta) {\r\n        this.gameState = this.parent.gameState['bouncingBall'];\r\n        // this.posAABB.setPos(this.gameState.x, this.gameState.y);\r\n\r\n        if (this.gameState.y == this.lastUpdate) {\r\n            // this.lastY = this.posAABB.canvasPos.y;\r\n            let y = this.posAABB.min.y + this.velocity * delta\r\n            this.posAABB.setPos(this.posAABB.x, y);\r\n\r\n            let canvasPos = this.posAABB.canvasPos;\r\n            if (canvasPos.y > 400 - 64 && this.velocity > 0) {\r\n                this.velocity = -this.velocity;\r\n            } else if (canvasPos.y < 32 && this.velocity < 0) {\r\n                this.velocity = -this.velocity;\r\n            }\r\n        } else {\r\n            this.lastUpdate = this.gameState.y;\r\n            this.posAABB.setPos(this.gameState.x, this.gameState.y);\r\n        }\r\n    }\r\n\r\n  \tdraw(interpolationPercentage) {\r\n        // Interpolate with the last position to reduce stuttering.\r\n        let canvasPos = this.posAABB.canvasPos\r\n        // var y = this.lastY + (canvasPos.y - this.lastY) * interpolationPercentage;\r\n        this.circle(this.scene.engine.context, canvasPos.x, canvasPos.y);\r\n  \t}\r\n\r\n    circle(context, x, y) {\r\n        context.beginPath();\r\n        context.arc(x, y, this.radius, 0, 2 * Math.PI, false);\r\n        context.fillStyle = this.color;\r\n        context.fill();\r\n        context.lineWidth = 1;\r\n        context.stroke();\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default bouncingBallObject;","import { GameObject } from 'mini5-engine';\nimport { default as otherPlayerObject } from './otherPlayerObject'\n\nclass playerManagerObject extends GameObject {\n\n\tconstructor(scene) {\n\t    super(scene)\n      \tthis.scene = scene;\n  \t\tthis.update = this.update.bind(this);\n  \t\tthis.draw = this.draw.bind(this);\n\n        this.gameState = this.parent.gameState['playerManager'] = {};\n        this.connectedPlayers = {};\n\t}\n\n\tupdate(delta) {\n\t\tthis.gameState = this.parent.gameState['playerManager']\n\t\tfor (var name in this.gameState) {\n\t\t\tif (name in this.connectedPlayers) {\n\t\t\t\tthis.connectedPlayers[name].update(delta);\n\t\t\t} else {\n\t\t\t\tthis.connectedPlayers[name] = new otherPlayerObject(this.scene, name, this);\n\t\t\t}\n\t\t}\n\t}\n\n\tdraw(interpolationPercentage) {\n\t\tfor (var name in this.gameState) {\n\n\t\t\tif (name in this.connectedPlayers) {\n\t\t\t\tthis.connectedPlayers[name].draw(interpolationPercentage);\n\t\t\t}\n\t\t}\n\t}\n\n\t// addPlayer(socket) {\n\t// \tconsole.log(\"adding player object\" + socket.id)\n\t// \tlet username = this.count;\n\t// \tthis.count++;\n\t// \tthis.connectedPlayers.push(new playerObject(this.scene, socket, username, this))\n\t// }\n}\n\nexport default playerManagerObject;","import { GameObject } from 'mini5-engine';\r\n\r\nconst w = 87,\r\n\ta = 65,\r\n\ts = 83,\r\n\td = 68,\r\n\tspace = 32,\r\n\txDisp = 0,\r\n\tyDisp = 0;\r\n\r\nclass inputManagerObject extends GameObject {\r\n\r\n\tconstructor(scene) {\r\n\t    super(scene)\r\n  \t\tthis.inputState = {\r\n  \t\t\txState: 'idle',\r\n  \t\t\tyState: 'idle',\r\n  \t\t};\r\n  \t\tthis.sendUpdate = false;\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\r\n\t\tvar prev_xState = this.inputState.xState;\r\n\t\tif (a in this.scene.engine.keyState && d in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.xState = 'idle';\r\n\t\t} else if (a in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.xState = 'movingLeft';\r\n\t\t} else if (d in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.xState = 'movingRight';\r\n\t\t} else {\r\n\t\t\tthis.inputState.xState = 'idle';\r\n\t\t}\r\n\t\tif (prev_xState != this.inputState.xState) {\r\n\t\t\tthis.sendUpdate = true;\r\n\t\t}\r\n\r\n\t\tvar prev_yState = this.inputState.yState;\r\n\t\tif (space in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.yState = 'jumping';\r\n\t\t} else {\r\n\t\t\tthis.inputState.yState = 'idle';\r\n\t\t}\r\n\t\tif (prev_yState != this.inputState.yState) {\r\n\t\t\tthis.sendUpdate = true;\r\n\t\t}\r\n\r\n\t\t// Send Updates to Server\r\n\t\tif (this.sendUpdate && this.scene.engine.mode === 'client') {\r\n\t\t\tthis.scene.engine.locals.socket.emit('inputState', this.inputState);\r\n\t\t\tthis.sendUpdate = false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport default inputManagerObject;","import { Scene } from 'mini5-engine';\r\n\r\nimport {\r\n\tinputManagerObject,\r\n} from '../gameObjects/'\r\n\r\nclass baseScene extends Scene {\r\n\r\n\tsetup(args) {\r\n\t\tthis.scaled = false;\r\n\t\tthis.inputManager = new inputManagerObject(this);\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\t\tthis.inputManager.update(delta);\r\n\t\tsuper.update(delta);\r\n\t}\r\n\r\n\tupdateSocket() {\r\n\t\tconsole.log('updated socket!');\r\n\t\tthis.engine.locals.socket.on('gamestate', (data) => {\r\n\t\t\tthis.gameState = data;\r\n\t\t})\r\n\t}\r\n\r\n\tsceneFadeOut() {\r\n\t\tconsole.log('fading out');\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n\t\t// if (!this.scaled) {\r\n\t\t// \tthis.engine.context.scale(1.1, 1.1);\r\n\t\t// \tthis.canvas.width = window.innerWidth;\r\n\t\t// \tthis.canvas.height = window.innerHeight;\r\n\t\t// \tthis.scaled = true;\r\n\t\t// }\r\n\t\tthis.canvas.width = window.innerWidth;\r\n\t\tthis.canvas.height = window.innerHeight;\r\n\t\tsuper.draw(interpolationPercentage);\r\n\t}\r\n\r\n}\r\n \r\nexport default baseScene;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// inputManager reads user input from the gameEngine\r\n// gameObject reads from inputManager and calculates inputState\r\n// networkManager reads the inputState and sends to the server","import testScene from './testScene'\r\nimport area01Scene from './area01Scene'\r\nimport area02Scene from './area02Scene'\r\n\r\nexport default {\r\n\t'testScene': testScene,\r\n\t'area01': area01Scene,\r\n\t'area02': area02Scene,\r\n}","import baseScene from './baseScene';\r\nimport {\r\n\tbackgroundObject,\r\n\tblockObject,\r\n\tplayerObject,\r\n\tportalObject,\r\n\tbouncingBallObject,\r\n\tplayerManagerObject,\r\n\tinputManagerObject\r\n} from '../gameObjects/'\r\n\r\nclass testScene extends baseScene {\r\n\r\n\tsetup(args) {\r\n\t\tsuper.setup(args);\r\n\r\n\t    // instantiate game objects\r\n\t    var background = new backgroundObject(this);\r\n\t    var ground = new blockObject(this, 800*3, 32, -800, 400 - 32);\r\n\t    var floating = new blockObject(this, 800/2, 32, 32, 400/2);\r\n\t    var ball = new bouncingBallObject(this, 'blue');\r\n\t    var player = new playerObject(this, 200, 296);\r\n\t   \tvar leftPortal = new portalObject(this, 'area02Scene', 96, 128, 64, 240);\r\n\t    var rightPortal = new portalObject(this, 'area01Scene', 96, 128, 960, 240);\r\n\r\n\t    // instantiate Manager objects\r\n\t    var playerManager = new playerManagerObject(this);\r\n\r\n\t    // create layers\r\n\t    this.layerOrder = ['layer1', 'layer2', 'layer3'];\r\n\t    this.layers = {\r\n\t    \t'layer1': [background],\r\n\t    \t'layer2': [ground, floating, ball, rightPortal],\r\n\t    \t'layer3': [player, playerManager],\r\n\t    }\r\n\r\n\t    // create collision tag lists\r\n\t    this.staticObjects = [ground.AABB, floating.AABB];\r\n\t    this.portalObjects = [rightPortal.AABB];\r\n\r\n\t    // add initial game objects\r\n\t    this.gameObjects = [background, player, ball, playerManager];\r\n\t}\r\n\r\n}\r\n\r\nexport default testScene;","import baseScene from './baseScene';\r\nimport {\r\n\tbackgroundObject,\r\n\tblockObject,\r\n\tplayerObject,\r\n\tportalObject,\r\n\tbouncingBallObject,\r\n\tplayerManagerObject,\r\n\tinputManagerObject\r\n} from '../gameObjects/'\r\n\r\nclass area01Scene extends baseScene {\r\n\r\n\tsetup(args) {\r\n\t\tsuper.setup(args);\r\n\r\n\t    // instantiate game objects\r\n\t    var background = new backgroundObject(this);\r\n\t    var ground = new blockObject(this, 800*3, 32, -800, 400 - 32);\r\n\t    var floating = new blockObject(this, 800/2, 32, 800/2, 400/2);\r\n\t    var ball = new bouncingBallObject(this, 'blue');\r\n\t    var player = new playerObject(this, 200, 296);\r\n\t   \tvar leftPortal = new portalObject(this, 'testScene', 96, 128, 64, 240);\r\n\t    var rightPortal = new portalObject(this, 'area02Scene', 96, 128, 960, 240);\r\n\r\n\t    // instantiate Manager objects\r\n\t    var playerManager = new playerManagerObject(this);\r\n\r\n\t    // create layers\r\n\t    this.layerOrder = ['layer1', 'layer2', 'layer3'];\r\n\t    this.layers = {\r\n\t    \t'layer1': [background],\r\n\t    \t'layer2': [ground, floating, ball, leftPortal, rightPortal],\r\n\t    \t'layer3': [player, playerManager],\r\n\t    }\r\n\r\n\t    // create collision tag lists\r\n\t    this.staticObjects = [ground.AABB, floating.AABB];\r\n\t    this.portalObjects = [leftPortal.AABB, rightPortal.AABB];\r\n\r\n\t    // add initial game objects\r\n\t    this.gameObjects = [background, player, ball, playerManager];\r\n\t}\r\n\r\n}\r\n\r\nexport default area01Scene;","import baseScene from './baseScene';\r\nimport {\r\n\tbackgroundObject,\r\n\tblockObject,\r\n\tplayerObject,\r\n\tportalObject,\r\n\tbouncingBallObject,\r\n\tplayerManagerObject,\r\n\tinputManagerObject\r\n} from '../gameObjects/'\r\n\r\nclass area02Scene extends baseScene {\r\n\r\n\tsetup(args) {\r\n\t\tsuper.setup(args);\r\n\r\n\t    // instantiate game objects\r\n\t    var background = new backgroundObject(this);\r\n\t    var ground = new blockObject(this, 800*3, 32, -800, 400 - 32);\r\n\t    var floating = new blockObject(this, 800/2, 32, 800, 400/2);\r\n\t    var ball = new bouncingBallObject(this, 'blue');\r\n\t    var player = new playerObject(this, 200, 296);\r\n\t   \tvar leftPortal = new portalObject(this, 'area01Scene', 96, 128, 64, 240);\r\n\t    var rightPortal = new portalObject(this, 'testScene', 96, 128, 960, 240);\r\n\r\n\t    // instantiate Manager objects\r\n\t    var playerManager = new playerManagerObject(this);\r\n\r\n\t    // create layers\r\n\t    this.layerOrder = ['layer1', 'layer2', 'layer3'];\r\n\t    this.layers = {\r\n\t    \t'layer1': [background],\r\n\t    \t'layer2': [ground, floating, ball, leftPortal],\r\n\t    \t'layer3': [player, playerManager],\r\n\t    }\r\n\r\n\t    // create collision tag lists\r\n\t    this.staticObjects = [ground.AABB, floating.AABB];\r\n\t    this.portalObjects = [leftPortal.AABB];\r\n\r\n\t    // add initial game objects\r\n\t    this.gameObjects = [background, player, ball, playerManager];\r\n\t}\r\n\r\n}\r\n\r\nexport default area02Scene;","import { Engine } from 'mini5-engine';\r\nimport SceneList from './scenes/index'\r\n\r\nif (process.env.REACT_APP_MODE === Engine.MODE_CLIENT) {\r\n\tvar game = new Engine(SceneList, 'testScene', Engine.MODE_CLIENT, {});\r\n} else {\r\n\tvar game = new Engine(SceneList, 'testScene', Engine.MODE_LOCAL, {});\r\n}\r\n\r\nexport default game;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './ui/App';\nimport './ui/index.css';\nimport store from './store/store';\nimport { Provider } from 'react-redux';\nimport io from 'socket.io-client';\nimport Game from './game/main'\n\nasync function main() { \n  console.log(process.env.REACT_APP_MODE);\n\n  let starting_scene = 'testScene';\n\n  Game.forceSwitchScene(starting_scene, {});\n  let username = 'neil';\n\n  username = await prompt(\"Please enter your name\", \"Harry Potter\");\n  let url = 'http://localhost:3000/manager/gameserver?scene=' + starting_scene;\n  let socket = await setup_websocket(Game, url, username);\n  Game.locals.socket = socket;\n  Game.currentScene.updateSocket();\n  Game.locals.username = username;\n  Game.start();\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n\n// PERSISTENT WEB SOCKET FUNCTIONS\n// ... or all web socket functions?\n// whatever doesn't need to be cleared between client connections\n\n// returns socket object\nasync function setup_websocket(game, url, username) {\n  let response = await fetch(url);\n  let data = await response.json();\n\n  console.log(data);\n  let socket = await io(data.origin, {\n    path: data.pathname,\n    query:\"name=\" + username,\n  });\n\n  socket.on('connect', () => {\n    console.log('connected!');\n  });\n\n  socket.on('heartbeat', (data) => {\n    console.log(data);\n  });\n\n  // Things that interact with the scene can just be in base_scene class\n  socket.on('playerTeleportStart', (data) => {\n    // switch scene to transition scene\n    game.currentScene.sceneFadeOut();\n    // data includes which scene to switch to for preloading/transition data\n    game.locals.nextScene = data.scene_name;\n    game.locals.state = 'transitioning'\n    console.log(data);    \n  })\n\n  socket.on('playerTeleportDestination', async (data) => {\n    if (game.locals.state != 'transitioning') {\n      return;\n    }\n    // data includes dest servers scene_name, origin, path to establish ws connection\n    // check if player in transition scene state\n    // send websocket connection request with server\n    // call connectToServer on new websocket(?)\n    // let newSocket = await setup_websocket(game, data.url, game.locals.username);\n    let tempUrl = 'http://localhost:3000/manager/gameserver?scene=' + game.locals.nextScene;\n    let newSocket = await setup_websocket(game, tempUrl, game.locals.username);\n    game.forceSwitchScene(game.locals.nextScene, {});\n    game.locals.oldSocket = game.locals.socket;\n    game.locals.socket = newSocket;\n    game.currentScene.updateSocket();\n    game.locals.oldSocket.close();\n  })\n\n  return socket\n}\n\nasync function new_websocket(url, username) {\n}\n\nmain();"],"sourceRoot":""}